var app=function(t,e){"use strict";function n(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var o=n(t);function r(){}function a(t){return t()}function s(){return Object.create(null)}function i(t){t.forEach(a)}function c(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t){t.parentNode&&t.parentNode.removeChild(t)}let p;function f(t){p=t}function d(t){(function(){if(!p)throw new Error("Function called outside component initialization");return p})().$$.on_mount.push(t)}const h=[],y=[];let g=[];const m=[],$=Promise.resolve();let b=!1;function _(t){g.push(t)}const x=new Set;let v=0;function C(){if(0!==v)return;const t=p;do{try{for(;v<h.length;){const t=h[v];v++,f(t),j(t.$$)}}catch(t){throw h.length=0,v=0,t}for(f(null),h.length=0,v=0;y.length;)y.pop()();for(let t=0;t<g.length;t+=1){const e=g[t];x.has(e)||(x.add(e),e())}g.length=0}while(h.length);for(;m.length;)m.pop()();b=!1,x.clear(),f(t)}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const k=new Set;function w(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];g.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),g=e}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(h.push(t),b||(b=!0,$.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function E(t,e,n,o,u,d,h,y=[-1]){const g=p;f(t);const m=t.$$={fragment:null,ctx:[],props:d,update:r,not_equal:u,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:s(),dirty:y,skip_bound:!1,root:e.target||g.$$.root};h&&h(m.root);let $=!1;if(m.ctx=n?n(t,e.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&u(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),$&&D(t,e)),n})):[],m.update(),$=!0,i(m.before_update),m.fragment=!!o&&o(m.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);m.fragment&&m.fragment.l(t),t.forEach(l)}else m.fragment&&m.fragment.c();e.intro&&((b=t.$$.fragment)&&b.i&&(k.delete(b),b.i(x))),function(t,e,n,o){const{fragment:r,after_update:s}=t.$$;r&&r.m(e,n),o||_((()=>{const e=t.$$.on_mount.map(a).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),s.forEach(_)}(t,e.target,e.anchor,e.customElement),C()}var b,x;f(g)}class O{$destroy(){w(this,1),this.$destroy=r}$on(t,e){if(!c(e))return r;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function L(t){let e;return{c(){var t;t="main",e=document.createElement(t)},m(t,n){!function(t,e,n){t.insertBefore(e,n||null)}(t,e,n)},p:r,i:r,o:r,d(t){t&&l(e)}}}function I(t){let n;d((async()=>{const t=o.json("/county.geojson"),e=o.csv("/county_rate.csv"),[r,a]=await Promise.all([t,e]);console.log("Geojson data:",r),console.log("Geojson data:",a);let s=new Map(a.map((t=>(console.log("Mapping:",t.County,t.County_Rate,t.Diabetes,t.Heart),[t.County,[t.County_Rate,t.Cancer,t.Diabetes,t.Heart,t.Liver,t.Total_Population]]))));r.features.forEach((t=>{const e=t.properties.CountyName,n=s.get(e)[0],o=s.get(e)[1],r=s.get(e)[2],a=s.get(e)[3],i=s.get(e)[4],c=s.get(e)[5];t.properties.deathRate=n?parseFloat(n):0,t.properties.cancer=o?parseInt(o):0,t.properties.diabetes=r?parseInt(r):0,t.properties.heart=a?parseInt(a):0,t.properties.liver=i?parseInt(i):0,t.properties.population=c?parseInt(c):0})),n=r})),e.accessToken="pk.eyJ1IjoiYWlyYW1lc2giLCJhIjoiY2x3MWltOWl1MDZnYTJqbDVnNDdhNTI3ZCJ9.MCALvz4Tm8RSzOB0e9deoQ";const r=new e.Map({container:"map",style:"mapbox://styles/mapbox/light-v11",center:[-119.4179,36.7783],zoom:5,minZoom:1,maxZoom:15}),a=o.select("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(255, 255, 255, 0.8)").style("padding","5px").style("border-radius","4px").style("font-family","Roboto, sans-serif");return r.on("load",(()=>{r.addSource("ca_counties",{type:"geojson",data:n}),r.addLayer({id:"counties-deaths",type:"fill",source:"ca_counties",paint:{"fill-color":["interpolate",["linear"],["get","deathRate"],0,"#f7fbff",5,"#deebf7",10,"#9ecae1",15,"#4292c6",20,"#08306b"],"fill-opacity":.8}}),r.addLayer({id:"counties-borders",type:"line",source:"ca_counties",layout:{},paint:{"line-color":"#000","line-width":.2}}),r.on("mousemove","counties-deaths",(t=>{if(t.features.length>0){const e=t.features[0];a.html(`${e.properties.CountyName} County<br/>Click for more!`).style("opacity",1).style("left",t.originalEvent.pageX+10+"px").style("top",t.originalEvent.pageY+10+"px")}})),r.on("mouseleave","counties-deaths",(()=>{a.transition().duration(500).style("opacity",0)})),r.on("click","counties-deaths",(function(t){if(t.features.length>0){const n=t.features[0].properties,o=`\n                <strong> ${n.CountyName} County</strong><br><hr>\n                Deaths from Diabetes: ${n.diabetes}<br>\n                Deaths from Cancer: ${n.cancer}<br>\n                Deaths from Heart Disease: ${n.heart}<br>\n                Deaths from Liver Disease: ${n.liver}<br>\n                Population: ${n.population}<br>\n            `;a.style("opacity",0),(new e.Popup).setLngLat(t.lngLat).setHTML(o).addTo(r)}}))})),[]}return new class extends O{constructor(t){super(),E(this,t,I,L,u,{})}}({target:document.body})}(d3,mapboxgl);
//# sourceMappingURL=bundle.js.map
